<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.yuzj.autolink.plc.control.MonitoringControl"
      spacing="15" VBox.vgrow="ALWAYS" style="-fx-padding: 20; -fx-background-color: #f8f9fa;">

    <!-- é¡µé¢æ ‡é¢˜ -->
    <HBox alignment="CENTER_LEFT">
        <Label text="å®žæ—¶æ•°æ®ç›‘æŽ§" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label text="å·¥ä¸šæ•°æ®å®žæ—¶ç›‘æµ‹ä¸Žåˆ†æž" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
    </HBox>

    <!-- ç›‘æŽ§æŽ§åˆ¶é¢æ¿ -->
    <VBox spacing="15"
          style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);">
        <padding>
            <Insets top="20" right="25" bottom="20" left="25"/>
        </padding>

        <!-- æŽ§åˆ¶é¢æ¿æ ‡é¢˜å’ŒæŒ‰é’® -->
        <HBox spacing="15" alignment="CENTER_LEFT">
            <Label text="ç›‘æŽ§æŽ§åˆ¶é¢æ¿" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 18px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="addTagButton" text="âž• æ·»åŠ ç›‘æŽ§ç‚¹" onAction="#handleAddTag"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>
            <Button fx:id="importTagsButton" text="ðŸ“¥ å¯¼å…¥é…ç½®" onAction="#handleImportTags"
                    style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>
            <Button fx:id="exportTagsButton" text="ðŸ“¤ å¯¼å‡ºé…ç½®" onAction="#handleExportTags"
                    style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>
            <Button fx:id="clearDataButton" text="ðŸ—‘ æ¸…é™¤æ•°æ®" onAction="#handleClearData"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>
        </HBox>

        <!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ -->
        <HBox spacing="15" alignment="CENTER_LEFT">
            <Label text="æœç´¢:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
            <TextField fx:id="searchField" promptText="æœç´¢äº§å“åæˆ–åœ°å€..." prefWidth="200"
                       style="-fx-background-radius: 5; -fx-border-color: #bdc3c7; -fx-border-radius: 5;"/>

            <Label text="æ•°æ®ç±»åž‹:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
            <ComboBox fx:id="dataTypeFilter" prefWidth="120" promptText="å…¨éƒ¨ç±»åž‹"
                      style="-fx-background-radius: 5; -fx-border-color: #bdc3c7; -fx-border-radius: 5;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Label fx:id="dataPointCountLabel" text="æ•°æ®ç‚¹: 0" style="-fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
        </HBox>
    </VBox>

    <!-- æ•°æ®ç»Ÿè®¡å¡ç‰‡ -->
    <HBox spacing="15">
        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="æ€»ç›‘æŽ§ç‚¹æ•°" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label fx:id="totalTagsCount" text="0"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
        </VBox>

        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="åœ¨çº¿ç›‘æŽ§ç‚¹" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label fx:id="onlineTagsCount" text="0"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
        </VBox>

        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="å¼‚å¸¸æ•°æ®" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label fx:id="errorDataCount" text="0"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
        </VBox>
    </HBox>

    <!-- æ•°æ®è¡¨æ ¼åŒºåŸŸ -->
    <VBox spacing="5"
          style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
          VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="15" right="15" bottom="15" left="15"/>
        </padding>

        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="å®žæ—¶ç›‘æŽ§æ•°æ®è¡¨" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 16px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="refreshTableButton" text="ðŸ”„ åˆ·æ–°" onAction="#handleRefreshTable"
                    style="-fx-background-color: #34495e; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 6 12;"/>
        </HBox>

        <TableView fx:id="dataTable" VBox.vgrow="ALWAYS" style="-fx-border-color: #ecf0f1;">
            <columns>
                <TableColumn fx:id="productNameColumn" text="äº§å“å" prefWidth="150"
                             style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="addressColumn" text="PLCåœ°å€" prefWidth="130" style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="valueColumn" text="å½“å‰å€¼" prefWidth="110" style="-fx-alignment: CENTER-RIGHT;"/>
                <TableColumn fx:id="dataTypeColumn" text="æ•°æ®ç±»åž‹" prefWidth="100" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="qualityColumn" text="æ•°æ®è´¨é‡" prefWidth="90" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="timestampColumn" text="æ›´æ–°æ—¶é—´" prefWidth="160" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="actionColumn" text="æ“ä½œ" prefWidth="100" style="-fx-alignment: CENTER;"/>
            </columns>
            <placeholder>
                <Label text="æš‚æ— ç›‘æŽ§æ•°æ®" style="-fx-text-fill: #95a5a6;"/>
            </placeholder>
        </TableView>
    </VBox>

    <!-- åˆ·æ–°æŽ§åˆ¶åŒºåŸŸ -->
    <VBox spacing="5"
          style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);">
        <padding>
            <Insets top="15" right="25" bottom="15" left="25"/>
        </padding>

        <HBox spacing="20" alignment="CENTER_LEFT">
            <Label text="æ•°æ®åˆ·æ–°æŽ§åˆ¶" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 16px;"/>

            <Label text="åˆ·æ–°é—´éš”:" style="-fx-font-weight: bold; -fx-text-fill: #34495e;"/>
            <TextField fx:id="refreshIntervalField" text="100" prefWidth="80"
                       style="-fx-background-radius: 5; -fx-border-color: #bdc3c7; -fx-border-radius: 5; -fx-alignment: CENTER-RIGHT;"/>
            <Label text="ms" style="-fx-text-fill: #34495e;"/>

            <Button fx:id="applyRefreshButton" text="åº”ç”¨è®¾ç½®" onAction="#handleApplyRefreshInterval"
                    style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>

            <Region HBox.hgrow="ALWAYS"/>

            <ToggleButton fx:id="autoRefreshToggle" text="è‡ªåŠ¨åˆ·æ–°" selected="true"
                          style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-padding: 8 15;"/>

            <Label fx:id="lastRefreshTimeLabel" text="æœ€åŽåˆ·æ–°: --:--:--"
                   style="-fx-text-fill: #7f8c8d; -fx-font-size: 12px;"/>
        </HBox>
    </VBox>

    <!-- çŠ¶æ€æ  -->
    <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #34495e; -fx-background-radius: 6;">
        <Label fx:id="statusLabel" text="ç›‘æŽ§ç³»ç»Ÿå°±ç»ª" style="-fx-text-fill: #ecf0f1; -fx-font-size: 12px;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label text="ç³»ç»ŸçŠ¶æ€:" style="-fx-text-fill: #bdc3c7; -fx-font-size: 12px;"/>
        <Label fx:id="systemStatus" text="æ­£å¸¸è¿è¡Œ"
               style="-fx-text-fill: #27ae60; -fx-font-size: 12px; -fx-font-weight: bold;"/>
    </HBox>
</VBox>
