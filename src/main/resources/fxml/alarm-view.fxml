<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<VBox xmlns="http://javafx.com/javafx/11.0.1"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.yuzj.autolink.plc.control.AlarmControl"
      spacing="15" VBox.vgrow="ALWAYS" style="-fx-padding: 20; -fx-background-color: #f8f9fa;">

    <!-- é¡µé¢æ ‡é¢˜ -->
    <HBox alignment="CENTER_LEFT">
        <Label text="æŠ¥è­¦ç®¡ç†ç³»ç»Ÿ" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label text="å®žæ—¶ç›‘æŽ§å·¥ä¸šè®¾å¤‡çŠ¶æ€" style="-fx-font-size: 14px; -fx-text-fill: #7f8c8d;"/>
    </HBox>

    <!-- æŽ§åˆ¶é¢æ¿ -->
    <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);">
        <padding>
            <Insets top="15" right="20" bottom="15" left="20"/>
        </padding>
        <HBox spacing="15" alignment="CENTER_LEFT">
            <Label text="æ“ä½œé¢æ¿" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 16px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button fx:id="refreshButton" text="ðŸ”„ åˆ·æ–°" onAction="#handleRefresh"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
            <Button fx:id="acknowledgeSelectedButton" text="âœ… ç¡®è®¤é€‰ä¸­" onAction="#handleAcknowledgeAlarms"
                    style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
            <Button fx:id="acknowledgeAllButton" text="âœ… ç¡®è®¤æ‰€æœ‰" onAction="#handleAcknowledgeAll"
                    style="-fx-background-color: #f39c12; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
            <Button fx:id="clearButton" text="ðŸ—‘ æ¸…é™¤é€‰ä¸­" onAction="#handleClearAlarms"
                    style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5;"/>
        </HBox>
    </VBox>

    <!-- æŠ¥è­¦ç»Ÿè®¡å¡ç‰‡ -->
    <HBox spacing="15">
        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="æ€»æŠ¥è­¦æ•°" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label text="0" fx:id="totalAlarmCount"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
        </VBox>

        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="æœªç¡®è®¤æŠ¥è­¦" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label text="0" fx:id="unacknowledgedCount"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
        </VBox>

        <VBox style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="20" bottom="15" left="20"/>
            </padding>
            <Label text="ç´§æ€¥æŠ¥è­¦" style="-fx-text-fill: #7f8c8d; -fx-font-size: 14px;"/>
            <Label text="0" fx:id="criticalAlarmCount"
                   style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #c0392b;"/>
        </VBox>
    </HBox>

    <!-- æŠ¥è­¦è¡¨æ ¼åŒºåŸŸ -->
    <VBox spacing="5"
          style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
          VBox.vgrow="ALWAYS">
        <padding>
            <Insets top="15" right="15" bottom="15" left="15"/>
        </padding>
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="æŠ¥è­¦è®°å½•åˆ—è¡¨" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 16px;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <TextField fx:id="searchField" promptText="æœç´¢æŠ¥è­¦..." style="-fx-background-radius: 5;"/>
            <ComboBox fx:id="filterComboBox" promptText="ç­›é€‰æ¡ä»¶" style="-fx-background-radius: 5;"/>
        </HBox>

        <TableView fx:id="alarmTable" VBox.vgrow="ALWAYS" style="-fx-border-color: #ecf0f1;">
            <columns>
                <TableColumn fx:id="tagNameColumn" text="æ ‡ç­¾åç§°" prefWidth="120" style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="alarmTypeColumn" text="æŠ¥è­¦ç±»åž‹" prefWidth="100"
                             style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="alarmMessageColumn" text="æŠ¥è­¦ä¿¡æ¯" prefWidth="180"
                             style="-fx-alignment: CENTER-LEFT;"/>
                <TableColumn fx:id="alarmLevelColumn" text="æŠ¥è­¦çº§åˆ«" prefWidth="90" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="alarmValueColumn" text="æ•°æ®å€¼" prefWidth="80"
                             style="-fx-alignment: CENTER-RIGHT;"/>
                <TableColumn fx:id="timestampColumn" text="æŠ¥è­¦æ—¶é—´" prefWidth="160" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="acknowledgedColumn" text="ç¡®è®¤çŠ¶æ€" prefWidth="90" style="-fx-alignment: CENTER;"/>
                <TableColumn fx:id="acknowledgedTimeColumn" text="ç¡®è®¤æ—¶é—´" prefWidth="160"
                             style="-fx-alignment: CENTER;"/>
            </columns>
            <placeholder>
                <Label text="æš‚æ— æŠ¥è­¦è®°å½•" style="-fx-text-fill: #95a5a6;"/>
            </placeholder>
        </TableView>
    </VBox>

    <!-- æ—¥å¿—å’ŒçŠ¶æ€åŒºåŸŸ -->
    <HBox spacing="15" VBox.vgrow="NEVER">
        <!-- æ“ä½œæ—¥å¿—åŒºåŸŸ -->
        <VBox spacing="5"
              style="-fx-background-color: white; -fx-background-radius: 8; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 6, 0, 0, 2);"
              HBox.hgrow="ALWAYS">
            <padding>
                <Insets top="15" right="15" bottom="15" left="15"/>
            </padding>
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="æ“ä½œæ—¥å¿—" style="-fx-font-weight: bold; -fx-text-fill: #34495e; -fx-font-size: 14px;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="æ¸…ç©ºæ—¥å¿—"
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-size: 12px; -fx-background-radius: 3;"/>
            </HBox>
            <TextArea fx:id="logArea" prefHeight="120" editable="false"
                      style="-fx-border-color: #ecf0f1; -fx-background-color: #fdfdfd; -fx-font-family: 'Consolas', 'Monaco', monospace;"/>
        </VBox>
    </HBox>

    <!-- çŠ¶æ€æ  -->
    <HBox spacing="10" style="-fx-padding: 10; -fx-background-color: #34495e; -fx-background-radius: 6;">
        <Label fx:id="statusLabel" text="ç³»ç»Ÿå°±ç»ª" style="-fx-text-fill: #ecf0f1; -fx-font-size: 12px;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label text="æœ€åŽæ›´æ–°:" style="-fx-text-fill: #bdc3c7; -fx-font-size: 12px;"/>
        <Label fx:id="lastUpdateTime" text="--:--:--"
               style="-fx-text-fill: #ecf0f1; -fx-font-size: 12px; -fx-font-weight: bold;"/>
    </HBox>
</VBox>
